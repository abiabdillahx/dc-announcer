{% extends "base.html" %}

{% block title %}Announce - POROS Announcer{% endblock %}

{% block content %}
<div class="panel">
  <h1>ðŸ“£ Announcement Panel</h1>
  <p class="subtitle">
    Create and send announcements to Discord. Supports Markdown and optional image uploads.
  </p>

  <form method="POST"
        enctype="multipart/form-data"
        onsubmit="sendAnnouncement(event)">

    <div class="grid">
      <div>
        <label for="title">Title (optional)</label>
        <input type="text" id="title" name="title" placeholder="Judul pengumuman">
      </div>

      <div>
        <label for="image_file">Image (optional)</label>
        <input type="file" id="image_file" name="image_file" accept="image/*" onchange="previewImage(event)">
      </div>
    </div>

    <label for="message">Message (Markdown supported)</label>
    <textarea
      id="message"
      name="message"
      placeholder="Tulis pengumuman di sini..."
      oninput="updatePreview()"
      required
    ></textarea>

    <button type="submit">ðŸš€ SEND ANNOUNCEMENT</button>
  </form>

  <section class="preview-wrapper">
    <h3>Live Preview</h3>
    <div class="preview">
      <div id="preview-text"><em>Preview markdown akan muncul di siniâ€¦</em></div>
      <img id="preview-image" class="preview-image" hidden alt="Image preview">
    </div>
  </section>
</div>

<div id="toast"></div>

<script src="{{ url_for('static', filename='js/app.js') }}"></script>
{% endblock %}